{"ast":null,"code":"var _jsxFileName = \"F:\\\\Nutrition-App (2)\\\\Nutrition-App\\\\nutrition-frontend\\\\src\\\\pages\\\\AdminDashboardPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminDashboardPage() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Fetch all users from the admin-only route\n  const fetchAllUsers = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/admin/users'); // <-- Use new admin route\n      setUsers(response.data);\n    } catch (err) {\n      if (err.response && err.response.status === 403) {\n        setError(\"You do not have permission to view this page.\");\n      } else {\n        setError(\"Could not fetch user data.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchAllUsers();\n  }, [fetchAllUsers]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading admin panel...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 52\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 50\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"This panel displays all users currently in the database.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        overflowX: 'auto',\n        marginTop: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"User ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Joined On\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: users.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.User_ID\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.Name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.Email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"card-tag\",\n                style: {\n                  backgroundColor: user.role === 'admin' ? '#fecaca' : '#dcfce7',\n                  // Red or Green\n                  color: user.role === 'admin' ? '#991b1b' : '#166534'\n                },\n                children: user.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: new Date(user.Created_At).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/admin/edit-user/${user.User_ID}`,\n                className: \"button button-secondary\",\n                style: {\n                  fontSize: '0.75rem',\n                  padding: '0.25rem 0.5rem'\n                },\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 33\n            }, this)]\n          }, user.User_ID, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminDashboardPage, \"tc8J9MPN9PpdxOh+5J7zAjRUdjs=\");\n_c = AdminDashboardPage;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboardPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","api","Link","jsxDEV","_jsxDEV","AdminDashboardPage","_s","users","setUsers","loading","setLoading","error","setError","fetchAllUsers","response","get","data","err","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","overflowX","marginTop","map","user","User_ID","Name","Email","backgroundColor","role","color","Date","Created_At","toLocaleDateString","to","fontSize","padding","_c","$RefreshReg$"],"sources":["F:/Nutrition-App (2)/Nutrition-App/nutrition-frontend/src/pages/AdminDashboardPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport api from '../services/api';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function AdminDashboardPage() {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n\r\n    // Fetch all users from the admin-only route\r\n    const fetchAllUsers = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await api.get('/admin/users'); // <-- Use new admin route\r\n            setUsers(response.data);\r\n        } catch (err) {\r\n            if (err.response && err.response.status === 403) {\r\n                setError(\"You do not have permission to view this page.\");\r\n            } else {\r\n                setError(\"Could not fetch user data.\");\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchAllUsers();\r\n    }, [fetchAllUsers]);\r\n\r\n    if (loading) return <div className=\"container\"><p>Loading admin panel...</p></div>;\r\n    if (error) return <div className=\"container\"><p className=\"error-message\">{error}</p></div>;\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h1>Admin Dashboard</h1>\r\n            <p>This panel displays all users currently in the database.</p>\r\n\r\n            <div style={{ overflowX: 'auto', marginTop: '2rem' }}>\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>User ID</th>\r\n                            <th>Name</th>\r\n                            <th>Email</th>\r\n                            <th>Role</th>\r\n                            <th>Joined On</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {users.map(user => (\r\n                            <tr key={user.User_ID}>\r\n                                <td>{user.User_ID}</td>\r\n                                <td>{user.Name}</td>\r\n                                <td>{user.Email}</td>\r\n                                <td>\r\n                                    <span \r\n                                        className=\"card-tag\" \r\n                                        style={{\r\n                                            backgroundColor: user.role === 'admin' ? '#fecaca' : '#dcfce7', // Red or Green\r\n                                            color: user.role === 'admin' ? '#991b1b' : '#166534'\r\n                                        }}\r\n                                    >\r\n                                        {user.role}\r\n                                    </span>\r\n                                </td>\r\n                                <td>{new Date(user.Created_At).toLocaleDateString()}</td>\r\n                                <td>\r\n                                    {/* Link to a future AdminEditUser page */}\r\n                                    <Link \r\n                                        to={`/admin/edit-user/${user.User_ID}`} \r\n                                        className=\"button button-secondary\"\r\n                                        style={{fontSize: '0.75rem', padding: '0.25rem 0.5rem'}}\r\n                                    >\r\n                                        Edit\r\n                                    </Link>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}